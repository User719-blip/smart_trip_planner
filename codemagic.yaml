workflows:
  android-workflow:
    name: Android Workflow
    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - name: Clean project
        script: flutter clean
      - name: Get Flutter packages
        script: flutter pub get
      - name: Build APK
        script: flutter build apk --release
      - name: List build directory contents
        script: |
          echo "=== Build directory structure ==="
          find build -name "*.apk" -type f 2>/dev/null || echo "No APK files found"
          ls -la build/app/outputs/ 2>/dev/null || echo "outputs directory not found"
    artifacts:
      - build/**/*.apk
      - build/**/*.aab
      - build/app/outputs/**/*.apk
      - build/app/outputs/flutter-apk/*.apk
      - build/app/outputs/apk/**/*.apk
      - build/app/outputs/bundle/release/*.aab
    publishing:
      email:
        recipients:
          - iamfake1815@gmail.com
        notify:
          success: true
          failure: true